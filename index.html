<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid Generator</title>
    <style>
        body {
            font-family: Calibri, sans-serif;
            font-size: 20px;
            font-weight: bold;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
        }

        .container {
            text-align: center;
        }

        button {
            font-family: Calibri, sans-serif;
            font-size: 20px;
            font-weight: bold;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #password-screen button {
            background-color: green;
            color: white;
        }

        input {
            font-family: Calibri, sans-serif;
            font-size: 20px;
            font-weight: bold;
            padding: 5px;
        }

        table {
            margin: auto;
            border-collapse: collapse;
            width: 60%;
        }

        td, th {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }

        .grid-cell {
            width: 50px;
            height: 50px;
            text-align: center;
            vertical-align: middle;
            color: white;
        }

        .PPP {
            background-color: blue;
        }

        .L1 {
            background-color: red;
        }

        .CC {
            background-color: yellow;
            color: black;
        }

        .L2 {
            background-color: green;
        }

        .L3 {
            background-color: orange;
        }

        .L4 {
            background-color: purple;
        }

        .L5 {
            background-color: cyan;
        }

        .L6 {
            background-color: pink;
        }

        #input-screen, #grid-screen {
            display: none;
        }

        #password-screen, #input-screen, #grid-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>
    <!-- Password Entry Screen -->
    <div id="password-screen">
        <div class="container">
            <h1>Password Protected</h1>
            <input type="password" id="password" placeholder="Enter password">
            <button id="submit-password-btn">ENTER</button>
            <p id="error-message" style="color: red;"></p>
        </div>
    </div>

    <!-- Cohort Population Entry Screen -->
    <div id="input-screen">
        <div class="container">
            <h1>Cohort Populations</h1>
            <table>
                <tr>
                    <th>Cohort</th>
                    <th>Population</th>
                </tr>
                <tr>
                    <td>PPP</td>
                    <td><input type="number" id="PPP" min="0"></td>
                </tr>
                <tr>
                    <td>L1</td>
                    <td><input type="number" id="L1" min="0"></td>
                </tr>
                <tr>
                    <td>CC</td>
                    <td><input type="number" id="CC" min="0"></td>
                </tr>
                <tr>
                    <td>L2</td>
                    <td><input type="number" id="L2" min="0"></td>
                </tr>
                <tr>
                    <td>L3</td>
                    <td><input type="number" id="L3" min="0"></td>
                </tr>
                <tr>
                    <td>L4</td>
                    <td><input type="number" id="L4" min="0"></td>
                </tr>
                <tr>
                    <td>L5</td>
                    <td><input type="number" id="L5" min="0"></td>
                </tr>
                <tr>
                    <td>L6</td>
                    <td><input type="number" id="L6" min="0"></td>
                </tr>
            </table>
            <button onclick="generateFormation()">Generate Formation</button>
        </div>
    </div>

    <!-- Generated Grid Display Screen -->
    <div id="grid-screen">
        <div class="container">
            <h1>Generated Grid</h1>
            <table id="grid-output"></table>
            <button onclick="location.reload()">Reset</button>
        </div>
    </div>

    <script>
        const correctPassword = "DefileFormations";

        document.getElementById("submit-password-btn").addEventListener("click", function() {
            const passwordInput = document.getElementById("password").value.trim();
            const errorMessage = document.getElementById("error-message");
            if (passwordInput === correctPassword) {
                document.getElementById("password-screen").style.display = "none";
                document.getElementById("input-screen").style.display = "block";
                errorMessage.textContent = "";
            } else {
                errorMessage.textContent = "Incorrect password. Please try again.";
            }
        });

        function generateFormation() {
            const cohorts = {
                PPP: parseInt(document.getElementById("PPP").value) || 0,
                L1: parseInt(document.getElementById("L1").value) || 0,
                CC: parseInt(document.getElementById("CC").value) || 0,
                L2: parseInt(document.getElementById("L2").value) || 0,
                L3: parseInt(document.getElementById("L3").value) || 0,
                L4: parseInt(document.getElementById("L4").value) || 0,
                L5: parseInt(document.getElementById("L5").value) || 0,
                L6: parseInt(document.getElementById("L6").value) || 0,
            };

            const totalPeople = Object.values(cohorts).reduce((a, b) => a + b, 0);
            const columns = 8;
            const rows = Math.ceil(totalPeople / columns);
            const grid = Array.from({ length: rows }, () => Array(columns).fill("EMPTY"));

            const cohortOrder = ["PPP", "L1", "CC", "L2", "L3", "L4", "L5", "L6"];
            let index = 0;

            cohortOrder.forEach((cohort) => {
                let remaining = cohorts[cohort];
                while (remaining > 0) {
                    const row = Math.floor(index / columns);
                    const col = index % columns;
                    if (grid[row][col] === "EMPTY") {
                        grid[row][col] = cohort;
                        remaining--;
                    }
                    index++;
                }
            });

            const gridOutput = document.getElementById("grid-output");
            gridOutput.innerHTML = "";
            grid.forEach((row) => {
                const tr = document.createElement("tr");
                row.forEach((cell) => {
                    const td = document.createElement("td");
                    td.textContent = cell === "EMPTY" ? "" : cell;
                    td.className = `grid-cell ${cell}`;
                    tr.appendChild(td);
                });
                gridOutput.appendChild(tr);
            });

            document.getElementById("input-screen").style.display = "none";
            document.getElementById("grid-screen").style.display = "block";
        }
    </script>
</body>
</html>
